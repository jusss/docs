<jusss> I installed archlinux on my new laptop Asus A556U, there're NVIDIA
	GEFORCE 930M and rtl8723be, and it pops lots spam message like "PCIe
	Bus Error: severity=Corrected, type=Physical Layer, id=00e5(Receiver
	ID) device [8086:9d15] error status/mask=00000001/00002000"
<jusss> but it stop spam when I run `rmmod rtl8723be`  [11:09]
<jusss> so it's the video card or wifi card issue?
<jusss> I google it, and people suggest "pci=nomsi", what means nomsi?
<sheep> no message signaled interrupts (MSI)
<jusss> it just ignore the message?
<sheep> no, it switches to an older form of interrupt signaling

vim /etc/default/grub
GRUB_CMDLINE_LINUX_DEFAULT="pci=nomsi"

grub-mkconfig -o /boot/grub/grub.cfg
---------------------------------------------------------------
<jusss> where I can find the system initial (boot up) message? dmesg?

<eschwartz> jusss: journalctl -b ${boot_offset}
-----------------------------------------------
rtl8723be(wifi card) module settings

/etc/modprobe.d/rtl8723be.conf
options rtl8723be fwlps=0 swlps=0
-----------------------------------
bluetooth
bluetooth hci0: Direct firmware load for rtl_bt/rtl8723b_config.bin failed with error -2

git clone https://github.com/lwfinger/rtl8723au_bt.git -b master
sudo cp rtl8723au_bt/Linux_BT_USB_2.11.20140423_8723BE/8723B/rtl8723b_config   /usr/lib/firmware/rtl_bt/rtl8723b_config.bin
from https://bbs.archlinux.org/viewtopic.php?pid=1698256

pacman -S bluez bluez-utils
modprob btusb
systemctl start bluetooth.service    blueman need this service

sudo gpasswd -a john lp      bluetooth deamon user group

bluetoothctl     get into interactive shell
poweron
discoverable on
scan on          search bluetooth
devices  show the bluetooth device
pair MAC Adress
connect MAC Adress
help
trust dev    pair without auth
quit

or config with GUI front-end
pacman -S blueman obexfs obexftp trayer
trayer
blueman-applet then you will find blueman icon on the tray
right click the icon on the tray, send a file to device

systemctl start bluetooth.service  when it shows bluez service init failed
------------------------------------------
charge but acpi show discharging

clocksource

noveau
----------------------------------------------

bbswitch disable nvidia video card gt930m

sudo modprobe -r nouveau 提示正在使用
sudo modprobe bbswitch    

/etc/modprob.d/blacklist.conf
blacklist nouveau
blacklist nvidiafb
options bbswitch load_state=0
重启

sudo tee /proc/acpi/bbswitch <<< OFF 关闭N卡，lspci显示N卡rev ff
sudo tee /proc/acpi/bbswitch <<< ON  打开N卡功能，lspci可以看到N卡rev a1，表明工作状态

每次关机或重启时，最好都打开N卡，然后开机自动关闭N卡，否则重启到win或linux都会找不到设备

写enable-nvidia-video-card.service，在shutdown.target前运行

/etc/systemd/system/enable-nvidia-video-card.service
[Unit]
Description= "enable nvidia video card when shutdown and reboot"
Before= shutdown.target

[Service]
ExecStart= /bin/true
ExecStop= /home/jusss/lab/enable-nvidia-video-card.sh
RemainAfterExit= yes

[Install]
WantedBy= multi-user.target

vim lab/enable-nvidia-video-card.sh
#!/bin/bash
sudo tee /proc/acpi/bbswitch <<< ON

chmod +x lab/enable-nvidia-video-card.sh
systemctl daemon-reload
systemctl start enable-nvidia-video-card.service
systemctl enable enable-nvidia-video-card.service

how to auto load kernel modules when system boot up?
man modules-load.d
/etc/modules-load.d/jusss.conf   启动时加载bbswitch模块
bbswitch
fat
vfat
msdos
nls_cp437
ntfs
vboxnetadp
vboxnetflt
vboxpci
vboxdrv
--------------------------------------------------
sound with pulseaudio
I found the default archlinux have no sound even alsamix show its intel soundcard
because it uses pulseaudio not alsa
pacman -S pavucontrol
then in "Output Devices" tag click the icon of mute audio, it will work
----------------------------------------------------------
acpi , plug in, show Discharging
---------------------------------------------------
touchpad tap won't work but wipe work

there're synaptics and libinput two way support for touchpad
and Xorg prefer libinput, remove synaptics and install libinput

then $xinput list  find the touch's name like "Elan Touchpad"
then vim /etc/X11/xorg.conf.d/30-touchpad.conf
Section "InputClass"
	Identifier "Elan Touchpad"
	Driver "libinput"
	MatchIsTouchpad "on"
	Option "Tapping" "on"
	Option "TappingButtonMap" "lmr"
EndSection

htpps://wiki.archlinux.org/index.php/Libinput#Button_re-mapping
		  

-----------------------------------------------
fcitx,  sudo vim /etc/profile    export XMODIFIERS=@im=fcitx
export QT_IM_MODULE=fcitx
export GTK_IM_MODULE=fcitx
export LC_CTYPE=zh_CN.UTF-8
--------------------------------------------
holy shit!
字体发虚 屏幕亮度用xbacklight无法调节，因为显卡驱动默认用的modesetting!而不是intel驱动
archlinux默认用modesetting! 在/etc/X11/xorg.conf里 driver modesetting

pacman -Ss xf86-video 看是否装了intel显卡驱动! xf86-video-intel

而且modesetting还可以用vaapi或者vdpau解码， 不需要xf86-video-intel，只需要libva-intel-driver
libva-vdpau-driver

https://wiki.archlinux.org/index.php/Xorg

没有找到指定的驱动，先搜索xf86-video-fbdev然后xf86-video-vesa然后fall back to modesetting并使用glamor加速

pacman -S xf86-video-vesa

/etc/X11/xorg.conf.d/20-intel.conf
Section "Device"
 Identifier "Intel Graphics"
 Driver     "intel"
 Option	    "DRI" "2"  #DRI3 is now default
 #Option    "AccelMethod" "sna" #default
 #Option    "AccelMethod" "uxa" #fallback

安装xf86-video-intel并设置上面这个xorg.conf之后，xbacklight就能调节屏幕亮度了
2017.06.02 xf86-video-intel 1:2.99.917+772+gc72bb27a-1 使用vaapi硬解电影还是会屏幕撕裂 tear screen
开启 Option "TearFree" "true"就好了
------------------------------------------------
pacman -S deepin
vim /etc/lightdm/lightdm.conf
greeter-session=lightdm-deepin-greeter

vim ~/.xinirc
startdde

然后用startx发现deepin桌面环境是启动起来了，可是竟然莫名奇妙卡在某个画面不动，发现lightdm.service没启动。。。

直接用systemctl start lightdm.service启动deepin桌面环境，不要用startdde or startx

lightdm好像不读取~/.xinitrc和~/.Xdfaults  also不读取~/.xprofile

DDE右键配置壁纸 不能用了，点图片没反应,重启系统，以john运行systemctl start lightdm发现可以了

屏幕闪烁 切换tty和Xorg延迟，于是决定使用modesetting

mpv提示[ao/pulse] the stream is suspended bailing out
安装pulseaudio-alsa之后发现播放video直接卡在第一个画面不动，卸载后播放正常
但是还是提示上面这个，killall pulseaudio之后就正常了，pulseaudio会自动重启

modesetting还可以用vaapi或者vdpau解码， 不需要xf86-video-intel，只需要libva-intel-driver 或libva-vdpau-driver
pacman -S libva-intel-driver libva-vdpau-driver
mpv -vo vaapi x.mp4

export VDPAU_DRIVER=va_gl
mpv -vo vdpau x.mp4
但是这是在用vaapi模拟vdpau, intel不支持vdpau,只支持vaapi,除非有nvidia显卡并安装nvidia官方驱动

硬件解码 mpv --hwdec=vaapi --vo=vaapi x.mp4

ligthdm会读取~/.xprofile而不读取~/.xinitrc

mpv全屏切换，在DDE里会卡顿，但是在fvwm里不会卡顿

mpv still don't read the fucking config file ~/.config/mpv/mpv.config! because it read the
fucking file ~/.config/mpv/mpv.conf!
----------------------------------------------------------------------------
acpi 一开始无法识别充电，现在莫名其妙识别了。。。原来并不是不充电，只是是描述变了

<jusss> [    0.486013] ACPI Error: [_SB_.PCI0.RP01.PXSX] Namespace lookup
	failure, AE_NOT_FOUND (20170119/psargs-363)
<jusss> [    0.486022] ACPI Error: Method parse/execution failed [\] (Node
	ffffffff81d25c60), AE_NOT_FOUND (20170119/psparse-543)
<jusss> anyone know why this happen?
<Hello71> !give jusss xy
<phrik> jusss: What exactly are you trying to do?
	http://www.perlmonks.org/index.pl?node_id=542341
<Khorne> jusss, https://bugzilla.redhat.com/show_bug.cgi?id=1413342

<phrik> Title: Bug 1413342 – Linux 4.9.3: ACPI Error: [_OSI] Namespace lookup
	failure, AE_NOT_FOUND (20160831/psargs-359) (at bugzilla.redhat.com)
<Khorne> Or if you want something a little bit more general:
	 https://bugzilla.kernel.org/show_bug.cgi?id=193531#c28
<phrik> Title: 193531 – ACPI Namespace lookup failure (at bugzilla.kernel.org)

<jusss> Khorne: now I plug power line into my laptop, but acpi show Battery 0:
	Discharging, 100%, discharging at zero rate - will never fully
	discharge.  [22:59]
<Khorne> And?

<jusss> and it should show charging I think

<Khorne> Charging to what? 101%?

<Khorne> Is it charging at zero rate? Discharging at zero rate? is that
	 actually the same thing?

<jusss> Khorne: I don't know, is it same?  [23:02]

<Khorne> If you are moving at 0km/h, are you moving forwards or backwards?
<Khorne> Or both?

<jusss> Khorne: so it's not important about acpi error ? 

<jusss> I can ignore that?
<Khorne> jusss, I dont think its related, acpi just interprets the
	 trickle-charge I think  [23:05]
<Khorne> And the ACPI errors are pretty common, I have them too, they are just
	 annoying, dont affect my charging or discharging

<jusss> Khorne: oh I see, it's a new way to descript about charing when it's
	100%

<Khorne> jusss, fairly certain, yea, its gonna discharge a tiny bit and then
	 gets topped off again, and discharges a tiny bit:
	 https://en.wikipedia.org/wiki/Trickle_charging  [23:07]
<phrik> Title: Trickle charging - Wikipedia (at en.wikipedia.org)
-------------------------------------------------------------------------------
xterm 按tab自动补全出现屏幕闪烁，用xterm +vb可以避免,  visualbell
.Xdefaults   XTerm*visualBell:false