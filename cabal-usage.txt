mkdir upload-files
cd upload-files
cabal init # with --lib will generate a library, default is execute


vim upload-files.cabal

executable upload-files # if it's lib, then it should be 'library upload-files' here
  main-is: Main.hs # set the Main.hs as enter
  build-depends: base, scotty, # set depend package here
  exposed-modules: Web.Scotty, Network.Wai # un-hidden package here

cabal run # will run Main.hs or cabal run upload-files

----------------------------------------------------

cabal-version:       >=1.10
-- Initial package description 'upload-files.cabal' generated by 'cabal
-- init'.  For further documentation, see
-- http://haskell.org/cabal/users-guide/

name:                upload-files
version:             0.1.0.0
-- synopsis:
-- description:
-- bug-reports:
-- license:
license-file:        LICENSE
-- author:
-- maintainer:
-- copyright:
-- category:
build-type:          Simple
extra-source-files:  CHANGELOG.md

executable upload-files
  main-is:             ScottyT.hs
  -- other-modules:
  -- other-extensions:
  build-depends:       base >=4.13 && <4.14, scotty, wai, warp, text, transformers, directory, http-types, wai-extra, unix
  -- hs-source-dirs:
  default-language:    Haskell2010
  exposed-modules: 
    Web.Scotty
    ,Web.Scotty.Trans
    ,Network.Wai 
    ,Network.HTTP.Types 
    ,Network.Wai.Handler.Warp
    ,Control.Monad.IO.Class
    ,System.Directory
    ,Control.Monad
    ,System.Environment
    ,Network.Wai.Parse
    ,System.Posix.IO
    ,Data.List
    ,Data.Text.Lazy 
    ,Control.Monad.Trans.State

---------------------------------------------------------------



cabal v2-install --lib scotty
----------------------------------------------------
install other cabal project on github into your project
git clone https://github.com/asg0451/scotty-login-session.git
cd scotty-login-session/
cabal v2-install --lib scotty-login-session # name could get from this cabal project's cabal file

vim src/Web/Scotty/Login/Internal/Model.hs
{-# LANGUAGE DerivingStrategies #-}
{-# LANGUAGE StandaloneDeriving #-}
{-# LANGUAGE UndecidableInstances #-}
{-# LANGUAGE DataKinds #-}

vim scotty-login-session.cabal
build-depends: ,unliftio-core

vim src/Web/Scotty/Login/Session.hs
import Control.Monad.IO.Unlift
runSqlite' :: (MonadIO m, MonadBaseControl IO m, Control.Monad.IO.Unlift.MonadUnliftIO m)
runDB :: :: (MonadIO m, MonadBaseControl IO m, Control.Monad.IO.Unlift.MonadUnliftIO m)
cabal v2-install --lib

vim upload-files.cabal
executable upload-files
  build-depends: , scotty-login-session ,scotty-cookie, bytestring, utf8-string
  exposed-modules: ,Web.Scotty.Cookie, 

cabal run upload-files # now you can use scotty-login-session in your project

--------------------------------------------------------------------
merge multiple cabal project into your project, cabal.project?

cd upload-files
git clone https://github.com/asg0451/scotty-login-session.git
vim cabal.project
packages: */*.cabal

it tells cabal you have local package in upload-files's subdirectories



mkdir -p web/upload-files
cd web/upload-files
cabal init
cd ..
git clone https://github.com/asg0451/scotty-login-session.git

web/cabal.project
web/upload-files/upload-files.cabal
web/scotty-login-session/scotty-login-session.cabal

vim web/cabal.project
packages: */*.cabal

which one you want to run, set it as executable,
that as libraries, set as library

let upload-files as executable, and scotty-login-session as library
call scotty-login-session in upload-files
then in upload-files.cabal

cat upload-files/upload-files.cabal 
library
  build-depends:       base >=4.13 && <4.14, scotty-login-session
executable upload-files
  main-is:             Main.hs
  build-depends:       base >=4.13 && <4.14
  default-language:    Haskell2010


cabal update
cd web/upload-files
cabal run

https://stackoverflow.com/questions/68274651/how-to-import-a-lib-from-one-cabal-package-to-another


