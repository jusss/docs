make defconfig
make localmodconfig
make menuconfig
only use current modules, or use modprobed-db

make modules_install INSTALL_MOD_PATH=~/lib
make install DESTDIR=~/lib

make install will auto update grub and initramfs, so don't use it, just cp bzImage to /boot
---------------------------------------------------------------------
cp .config to new kernel source directory
make oldconfig
make menuconfig   press / search
then vim .config change some option
then make prepare;make scripts;make -j `nproc`

bzImage就是编译后的内核，已经用算法压缩过的内核，压缩算法可以自己选择比如lz4

### copy modules
make modules_install

### copy kernel, or copy bzImage to /boot
make install

### generate initramfs, if make install auto generate initramfs, then don't run this
mkinitramfs -o /boot/initrd.img-xxx /lib/modules/xxx

the initramfs generated by `make install` will cause init error like "Runing /scripts/local-block ... done"
and "alert! /dev/mmcblk0p20 does not exist"
if you install linux-image pacakge for upgrade kernel, this show up too

try use mkinitcpio

mkinitcpio -p linux -g /boot/initrd.img-4.9.3 -k 4.9.3
the name 4.9.3 it's /lib/modules/4.9.3

mkinitramfs -o initrd.img-4.9.3 4.93

mkinitramfs is for debian, and mkinitcpio is for archlinux

blkid /dev/mmcblk0p20 get the uuid
then use 
`search --no-floppy --fs-uuid --set=root your-uuid`
`linux root=UUID=xxxx` in grub

